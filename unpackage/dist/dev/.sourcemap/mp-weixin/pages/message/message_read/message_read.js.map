{"version":3,"sources":["webpack:///D:/HBuilderX/attsys-miniprogram/pages/message/message_read/message_read.vue","webpack:///D:/HBuilderX/attsys-miniprogram/pages/message/message_read/message_read.vue?d9d2","webpack:///D:/HBuilderX/attsys-miniprogram/pages/message/message_read/message_read.vue?b449","webpack:///D:/HBuilderX/attsys-miniprogram/pages/message/message_read/message_read.vue?5559","webpack:///D:/HBuilderX/attsys-miniprogram/pages/message/message_read/message_read.vue?cac5","webpack:///D:/HBuilderX/attsys-miniprogram/pages/message/message_read/message_read.vue?6722","webpack:///D:/HBuilderX/attsys-miniprogram/pages/message/message_read/message_read.vue?7e4c"],"names":["queryReadMessage","that","pages","message_list","i","uni","request","url","webSiteUrl","user_id","header","token","method","success","res","console","log","statusCode","data","total","Math","ceil","per_page","push","apply","showToast","title","icon","duration","components","uniPopup","userName","isShowPopup","message_content","message_title","message_from","onLoad","getStorageSync","onPullDownRefresh","setTimeout","stopPullDownRefresh","methods","showMessage","e","messageId","currentTarget","dataset","messageid","id","from","name","content","fail","查询失败","closeMessage"],"mappings":"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","file":"pages/message/message_read/message_read.js","sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\timport uniPopup from '@/components/uni-popup/uni-popup.vue'\n\timport webSiteUrl from '../../../common/webSiteUrl.js'\n\t\n\t// 向服务器查询read消息。用total除以per_page，向下取整，得出需要查询的总页数\n\tfunction queryReadMessage(that) {\n\t\tvar pages = 1;\n\t\tthat.message_list = [];\n\t\tfor (var i = 1; i <= pages; i++) {\n\t\t\tuni.request({\n\t\t\t\turl: webSiteUrl + '/message?to_user_id=' + that.user_id + '&status=read&page=' + i,\n\t\t\t\theader:{\n\t\t\t\t\t'Authorization': 'Bearer '+ that.token,\n\t\t\t\t},\n\t\t\t\tmethod: 'GET',\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tconsole.log(res);\n\t\t\t\t\tif (res.statusCode==200) {\n\t\t\t\t\t\tif (res.data.total != 0) {\n\t\t\t\t\t\t\tpages = Math.ceil(res.data.total / res.data.per_page);\n\t\t\t\t\t\t\t// 将得到的数组加入message_list中\n\t\t\t\t\t\t\tthat.message_list.push.apply(that.message_list,res.data.data);\n\t\t\t\t\t\t} else{\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle:'无未读信息',\n\t\t\t\t\t\t\t\ticon:'none',\n\t\t\t\t\t\t\t\tduration:2000\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\tconsole.log(\"无未读信息\")\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (res.statusCode==204) {\n\t\t\t\t\t\tconsole.log(\"无系统通知信息\")\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.log(\"系统通知信息获取失败\")\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\t\n    export default {\n\t\tcomponents: {\n\t\t\tuniPopup\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tuserName: '',\n\t\t\t\ttoken:'',\n\t\t\t\tuser_id:0,\n\t\t\t\tisShowPopup:false,\n\t\t\t\tmessage_content:'',\n\t\t\t\tmessage_title:'',\n\t\t\t\tmessage_from:'',\n\t\t\t\tmessage_list: [\n\t\t\t\t\t// {\n\t\t\t\t\t// \t\"id\": 1,\n\t\t\t\t\t// \t\"from\": {\n\t\t\t\t\t// \t\t\"id\": 1,\n\t\t\t\t\t// \t\t\"name\": \"test\",\n\t\t\t\t\t// \t},\n\t\t\t\t\t// \t\"to\": {\n\t\t\t\t\t// \t\t\"id\": 2,\n\t\t\t\t\t// \t\t\"name\": \"test2\",\n\t\t\t\t\t// \t},\n\t\t\t\t\t// \t\"title\": \"test title\",\n\t\t\t\t\t// \t\"status\": \"read\"\n\t\t\t\t\t// }\n\t\t\t\t],\n\t\t\t}\n\t\t},\n        onLoad: function(){\n\t\t\t// 从存储中获取用户登陆信息\n\t\t\tthis.token = uni.getStorageSync('token');\n\t\t\tthis.userName = uni.getStorageSync('userName');\n\t\t\tthis.user_id = uni.getStorageSync('user_id');\n\t\t\tvar that = this;\n\t\t\tqueryReadMessage(that);\n\t\t},\n\t\tonPullDownRefresh() {\n\t\t\tconsole.log('refresh');\n\t\t\tvar that = this;\n\t\t\tqueryReadMessage(that);\n\t\t\tsetTimeout(function () {\n\t\t\t\tuni.stopPullDownRefresh();\n\t\t\t}, 1000);\n\t\t},\n\t\tmethods:{\n\t\t\tshowMessage(e) {\n\t\t\t\tconsole.log(e)\n\t\t\t\tvar messageId = e.currentTarget.dataset.messageid;\n\t\t\t\tvar id = e.currentTarget.dataset.id;\n\t\t\t\tthis.message_title = 'test title';\n\t\t\t\tthis.message_from = 'tom';\n\t\t\t\tthis.message_content = messageId + 'test contenttest contenttest contenttest contenttest contenttest content';\n\t\t\t\tuni.request({\n\t\t\t\t\turl: webSiteUrl + '/message/' + messageId,\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\theader: {\n\t\t\t\t\t\t'Authorization': 'Bearer '+ this.token,\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tconsole.log(res);\n\t\t\t\t\t\tthis.message_title = res.data.data.title;\n\t\t\t\t\t\tthis.message_from = res.data.data.from.name;\n\t\t\t\t\t\tthis.message_content = res.data.data.content;\n\t\t\t\t\t},\n\t\t\t\t\tfail() {\n\t\t\t\t\t\tconsole.log(查询失败);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\tthis.isShowPopup = true;\n\t\t\t},\n\t\t\tcloseMessage() {\n\t\t\t\tthis.isShowPopup = false;\n\t\t\t}\n\t\t}\n    }\n","// extracted by mini-css-extract-plugin","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./message_read.vue?vue&type=template&id=215e20fe&\"\nimport script from \"./message_read.vue?vue&type=script&lang=js&\"\nexport * from \"./message_read.vue?vue&type=script&lang=js&\"\nimport style0 from \"./message_read.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"E:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('215e20fe', component.options)\n    } else {\n      api.reload('215e20fe', component.options)\n    }\n    module.hot.accept(\"./message_read.vue?vue&type=template&id=215e20fe&\", function () {\n      api.rerender('215e20fe', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"D:/HBuilderX/attsys-miniprogram/pages/message/message_read/message_read.vue\"\nexport default component.exports","import mod from \"-!E:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!./message_read.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!./message_read.vue?vue&type=script&lang=js&\"","import mod from \"-!E:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!E:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-1!E:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--6-oneOf-1-2!E:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!E:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!./message_read.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!E:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!E:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-1!E:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--6-oneOf-1-2!E:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!E:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!./message_read.vue?vue&type=style&index=0&lang=css&\"","export * from \"-!E:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!E:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!./message_read.vue?vue&type=template&id=215e20fe&\""],"sourceRoot":""}